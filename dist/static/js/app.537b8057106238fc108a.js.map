{"version":3,"sources":["webpack:///static/js/app.537b8057106238fc108a.js","webpack:///./src/main.js"],"names":["webpackJsonp","3","module","__webpack_exports__","__webpack_require__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default","n","__WEBPACK_IMPORTED_MODULE_1_vue__","__WEBPACK_IMPORTED_MODULE_2_leancloud_storage__","__WEBPACK_IMPORTED_MODULE_2_leancloud_storage___default","a","init","appId","appKey","el","data","actionType","newTodo","todoList","currentUser","formData","username","password","created","_this","this","window","onbeforeunload","dataString","localStorage","setItem","oldDataString","getItem","oldData","JSON","parse","getCurrentUser","methods","addTodo","push","title","createdAt","Date","done","removeTodo","todo","index","indexOf","splice","signUp","_this2","user","User","setUsername","setPassword","then","loginedUser","error","alert","login","_this3","logIn","current","id","attributes","logout","logOut","location","reload"],"mappings":"AAAAA,cAAc,IAERC,EACA,SAAUC,EAAQC,EAAqBC,GAE7C,YACAC,QAAOC,eAAeH,EAAqB,cAAgBI,OAAO,GAC7C,IAAIC,GAAqEJ,EAAoB,GACzFK,EAA6EL,EAAoBM,EAAEF,GACnGG,EAAoCP,EAAoB,GACxDQ,EAAkDR,EAAoB,GACtES,EAA0DT,EAAoBM,EAAEE,ECNzGC,GAAAC,EAAGC,MACDC,MAHW,oCAIXC,OAHY,4BAMJ,IAAIN,GAAA,GACZO,GAAI,OACJC,MACEC,WAAY,SACZC,QAAS,GACTC,YACAC,YAAa,KACbC,UACEC,SAAU,GACVC,SAAU,KAGdC,QAAS,WAAU,GAAAC,GAAAC,IACjBC,QAAOC,eAAiB,WACtB,GAAIC,GAAavB,IAAemB,EAAKN,SACrCQ,QAAOG,aAAaC,QAAQ,UAAWF,GAGzC,IAAIG,GAAgBL,OAAOG,aAAaG,QAAQ,WAC5CC,EAAUC,KAAKC,MAAMJ,EACzBN,MAAKP,SAAWe,MAChBR,KAAKN,YAAcM,KAAKW,kBAEzBC,SACCC,QAAS,WACPb,KAAKP,SAASqB,MACZC,MAAOf,KAAKR,QACZwB,UAAW,GAAIC,MACfC,MAAM,IAERlB,KAAKR,QAAU,IAEjB2B,WAAY,SAASC,GACnB,GAAIC,GAAQrB,KAAKP,SAAS6B,QAAQF,EAClCpB,MAAKP,SAAS8B,OAAOF,EAAM,IAE7BG,OAAQ,WAAY,GAAAC,GAAAzB,KACd0B,EAAO,GAAI1C,GAAAC,EAAG0C,IAClBD,GAAKE,YAAY5B,KAAKL,SAASC,UAC/B8B,EAAKG,YAAY7B,KAAKL,SAASE,UAC/B6B,EAAKF,SAASM,KAAK,SAACC,GAClBN,EAAK/B,YAAc+B,EAAKd,kBACvB,SAACqB,GACFC,MAAM,WAGVC,MAAO,WAAY,GAAAC,GAAAnC,IACjBhB,GAAAC,EAAG0C,KAAKS,MAAMpC,KAAKL,SAASC,SAAUI,KAAKL,SAASE,UAAUiC,KAAK,SAACC,GAClEI,EAAKzC,YAAcyC,EAAKxB,kBACvB,SAAUqB,GACXC,MAAM,WAGVtB,eAAgB,WACd,GAAI0B,GAAUrD,EAAAC,EAAG0C,KAAKU,SACrB,IAAIA,EAAS,IACNC,GAAyCD,EAAzCC,GAAItB,EAAqCqB,EAArCrB,SACT,QAAQsB,KAAI1C,SADkCyC,EAA1BE,WAAa3C,SACXoB,aAEtB,MAAO,OAGZwB,OAAQ,WACLxD,EAAAC,EAAG0C,KAAKc,SACRzC,KAAKN,YAAc,KACnBO,OAAOyC,SAASC,gBD6BpB","file":"static/js/app.537b8057106238fc108a.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ 3:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_leancloud_storage__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_leancloud_storage___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_leancloud_storage__);\n\n\n\n\nvar APP_ID = 'Q4WGVG68HbiX048NdD9qar4U-gzGzoHsz';\nvar APP_KEY = '6jpGvljeRsAd47OEelVuNpJ3';\n__WEBPACK_IMPORTED_MODULE_2_leancloud_storage___default.a.init({\n  appId: APP_ID,\n  appKey: APP_KEY\n});\n\nvar app = new __WEBPACK_IMPORTED_MODULE_1_vue__[\"a\" /* default */]({\n  el: '#app',\n  data: {\n    actionType: 'signUp',\n    newTodo: '',\n    todoList: [],\n    currentUser: null,\n    formData: {\n      username: '',\n      password: ''\n    }\n  },\n  created: function created() {\n    var _this = this;\n\n    window.onbeforeunload = function () {\n      var dataString = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(_this.todoList);\n      window.localStorage.setItem('myTodos', dataString);\n    };\n\n    var oldDataString = window.localStorage.getItem('myTodos');\n    var oldData = JSON.parse(oldDataString);\n    this.todoList = oldData || [];\n    this.currentUser = this.getCurrentUser();\n  },\n  methods: {\n    addTodo: function addTodo() {\n      this.todoList.push({\n        title: this.newTodo,\n        createdAt: new Date(),\n        done: false // 添加一个 done 属性\n      });\n      this.newTodo = '';\n    },\n    removeTodo: function removeTodo(todo) {\n      var index = this.todoList.indexOf(todo);\n      this.todoList.splice(index, 1);\n    },\n    signUp: function signUp() {\n      var _this2 = this;\n\n      var user = new __WEBPACK_IMPORTED_MODULE_2_leancloud_storage___default.a.User();\n      user.setUsername(this.formData.username);\n      user.setPassword(this.formData.password);\n      user.signUp().then(function (loginedUser) {\n        _this2.currentUser = _this2.getCurrentUser();\n      }, function (error) {\n        alert('注册失败');\n      });\n    },\n    login: function login() {\n      var _this3 = this;\n\n      __WEBPACK_IMPORTED_MODULE_2_leancloud_storage___default.a.User.logIn(this.formData.username, this.formData.password).then(function (loginedUser) {\n        _this3.currentUser = _this3.getCurrentUser();\n      }, function (error) {\n        alert('登录失败');\n      });\n    },\n    getCurrentUser: function getCurrentUser() {\n      var current = __WEBPACK_IMPORTED_MODULE_2_leancloud_storage___default.a.User.current();\n      if (current) {\n        var id = current.id,\n            createdAt = current.createdAt,\n            username = current.attributes.username;\n\n        return { id: id, username: username, createdAt: createdAt };\n      } else {\n        return null;\n      }\n    },\n    logout: function logout() {\n      __WEBPACK_IMPORTED_MODULE_2_leancloud_storage___default.a.User.logOut();\n      this.currentUser = null;\n      window.location.reload();\n    }\n  }\n});\n\n/***/ })\n\n},[3]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.537b8057106238fc108a.js","import Vue from 'vue'\nimport AV from 'leancloud-storage'\n\nvar APP_ID = 'Q4WGVG68HbiX048NdD9qar4U-gzGzoHsz';\nvar APP_KEY = '6jpGvljeRsAd47OEelVuNpJ3';\nAV.init({\n  appId: APP_ID,\n  appKey: APP_KEY\n});\n\nvar app = new Vue({\n  el: '#app',\n  data: {\n    actionType: 'signUp',\n    newTodo: '',\n    todoList: [],\n    currentUser: null,\n    formData: {\n      username: '',\n      password: ''\n    },\n  },\n  created: function(){\n    window.onbeforeunload = ()=>{\n      let dataString = JSON.stringify(this.todoList) \n      window.localStorage.setItem('myTodos', dataString) \n    }\n\n    let oldDataString = window.localStorage.getItem('myTodos')\n    let oldData = JSON.parse(oldDataString)\n    this.todoList = oldData || [] \n    this.currentUser = this.getCurrentUser();\n  },\n   methods: {\n    addTodo: function(){\n      this.todoList.push({\n        title: this.newTodo,\n        createdAt: new Date(),\n        done: false // 添加一个 done 属性\n      })\n      this.newTodo = ''\n    },\n    removeTodo: function(todo){\n      let index = this.todoList.indexOf(todo) \n      this.todoList.splice(index,1) \n    },\n    signUp: function () {\n      let user = new AV.User();\n      user.setUsername(this.formData.username);\n      user.setPassword(this.formData.password);\n      user.signUp().then((loginedUser) => { \n        this.currentUser = this.getCurrentUser() \n      }, (error) => {\n        alert('注册失败') \n      });\n    },\n    login: function () {\n      AV.User.logIn(this.formData.username, this.formData.password).then((loginedUser) => { \n        this.currentUser = this.getCurrentUser() \n      }, function (error) {\n        alert('登录失败') \n      });\n    },\n    getCurrentUser: function () { \n      let current = AV.User.current()\n       if (current) {\n         let {id, createdAt, attributes: {username}} = current\n         return {id, username, createdAt} \n       } else {\n         return null\n       }\n    },\n    logout: function () {\n       AV.User.logOut()\n       this.currentUser = null\n       window.location.reload()\n    }\n  }\n})   \n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}